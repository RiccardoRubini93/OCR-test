{"ast":null,"code":"import React,{useEffect,useState,useMemo}from'react';import{apiUrl}from'./api';import{jsPDF}from'jspdf';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const accentGradient='linear-gradient(90deg, #a259ff 0%, #4f8cff 100%)';const accentText={background:accentGradient,WebkitBackgroundClip:'text',WebkitTextFillColor:'transparent',fontWeight:700};function Summarize(_ref){let{projectId}=_ref;const[texts,setTexts]=useState([]);const[loadingTexts,setLoadingTexts]=useState(true);const[error,setError]=useState('');const[selectedId,setSelectedId]=useState('');const[summarizeAll,setSummarizeAll]=useState(false);const[provider,setProvider]=useState('openai');const[ollamaModels,setOllamaModels]=useState([]);const[ollamaModel,setOllamaModel]=useState('llama3');const[ollamaOnlyRunning,setOllamaOnlyRunning]=useState(false);const[ollamaModelsRefresh,setOllamaModelsRefresh]=useState(0);const[summary,setSummary]=useState('');const[loading,setLoading]=useState(false);const[summaryLength,setSummaryLength]=useState('medium');const[summaryFormat,setSummaryFormat]=useState('bullets');const[instructions,setInstructions]=useState('');const[showLengthInfo,setShowLengthInfo]=useState(false);const handleSavePdf=()=>{if(!summary)return;const doc=new jsPDF({unit:'pt',format:'a4'});const marginX=48;const marginY=56;let cursorY=marginY;doc.setFont('helvetica','bold');doc.setFontSize(18);doc.text('Summary',marginX,cursorY);cursorY+=20;doc.setFont('helvetica','normal');doc.setFontSize(11);const meta=[`Text ID: ${summarizeAll?'ALL':selectedId||'-'}`,`Provider: ${provider}${provider==='ollama'?` (${ollamaModel})`:''}`,`Length: ${summaryLength}`,`Format: ${summaryFormat}`,instructions?`Instructions: ${instructions}`:null,projectId?`Project: ${projectId}`:'Project: All'].filter(Boolean).join('  |  ');const metaLines=doc.splitTextToSize(meta,540);metaLines.forEach(line=>{if(cursorY>doc.internal.pageSize.getHeight()-marginY){doc.addPage();cursorY=marginY;}doc.text(line,marginX,cursorY);cursorY+=16;});cursorY+=8;doc.setDrawColor(200);doc.line(marginX,cursorY,doc.internal.pageSize.getWidth()-marginX,cursorY);cursorY+=18;doc.setFont('helvetica','normal');doc.setFontSize(12);const contentLines=doc.splitTextToSize(summary,540);contentLines.forEach(line=>{if(cursorY>doc.internal.pageSize.getHeight()-marginY){doc.addPage();cursorY=marginY;}doc.text(line,marginX,cursorY);cursorY+=16;});const filenameBase=summarizeAll?`summary_all${projectId?`_project_${projectId}`:''}`:selectedId?`summary_${selectedId}`:'summary';doc.save(`${filenameBase}.pdf`);};useEffect(()=>{const fetchTexts=async()=>{try{const url=projectId?`${apiUrl('/texts/')}?project_id=${encodeURIComponent(projectId)}`:apiUrl('/texts/');const res=await fetch(url);const data=await res.json();setTexts(data);}catch(err){setError('Failed to fetch saved texts');}setLoadingTexts(false);};fetchTexts();},[projectId]);useEffect(()=>{if(provider==='ollama'){const endpoint=ollamaOnlyRunning?'/ollama/models/running':'/ollama/models';fetch(apiUrl(endpoint)).then(res=>res.json()).then(data=>{if(data.models){setOllamaModels(data.models);setOllamaModel(prev=>data.models.includes(prev)?prev:data.models[0]||'llama3');}else{setOllamaModels([]);}}).catch(()=>setOllamaModels([]));}},[provider,ollamaOnlyRunning,ollamaModelsRefresh]);const selectedText=useMemo(()=>{const id=Number(selectedId);return texts.find(t=>t.id===id)||null;},[selectedId,texts]);const handleSummarize=async e=>{e.preventDefault();setError('');setSummary('');setLoading(true);if(!summarizeAll&&!selectedId){setError('Please select a saved text to summarize or toggle \"Summarize all\"');setLoading(false);return;}const payload={provider,model:provider==='ollama'?ollamaModel:undefined,text_id:summarizeAll?undefined:Number(selectedId),summarize_all:summarizeAll,project_id:projectId?Number(projectId):undefined,summary_length:summaryLength,format:summaryFormat,instructions:instructions.trim()?instructions.trim():undefined};try{const res=await fetch(apiUrl('/texts/summarize'),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(res.ok){setSummary(data.summary);}else{setError(data.error||'Failed to summarize');}}catch(err){setError('Network error');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-responsive-box\",style:{width:'100%',maxWidth:1100,margin:'0 auto',padding:'0 5vw'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:38,marginBottom:24,...accentText},children:\"Summarize Saved Text\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSummarize,className:\"d-flex flex-column gap-3\",style:{maxWidth:900,width:'100%'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"provider-select\",className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"LLM Provider\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"provider-select\",value:provider,onChange:e=>setProvider(e.target.value),className:\"form-select bg-dark text-white\",style:{padding:'10px 18px',borderRadius:8,border:'1.5px solid #4f8cff',fontSize:17,fontWeight:600},children:[/*#__PURE__*/_jsx(\"option\",{value:\"openai\",children:\"OpenAI\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ollama\",children:\"Ollama\"})]})]}),provider==='ollama'&&/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ollama-model-select\",className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"Ollama Model\"}),/*#__PURE__*/_jsx(\"select\",{id:\"ollama-model-select\",value:ollamaModel,onChange:e=>setOllamaModel(e.target.value),className:\"form-select bg-dark text-white\",style:{padding:'10px 18px',borderRadius:8,border:'1.5px solid #4f8cff',fontSize:17,fontWeight:600},disabled:ollamaModels.length===0,children:ollamaModels.map(model=>/*#__PURE__*/_jsx(\"option\",{value:model,children:model},model))}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch mt-2\",style:{color:'#bfc9d9',fontWeight:600},children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"only-running-switch-sum\",checked:ollamaOnlyRunning,onChange:e=>setOllamaOnlyRunning(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"only-running-switch-sum\",children:\"Only running\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-light mt-2\",onClick:()=>setOllamaModelsRefresh(v=>v+1),style:{borderRadius:10,padding:'8px 14px'},children:\"Refresh\"}),ollamaModels.length===0&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#bfc9d9',fontSize:14,display:'inline-block',marginTop:8},children:\"No models found. Toggle \\\"Only running\\\" off, start a model in Ollama, or refresh.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 align-items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"saved-select\",className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"Saved Text\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-check form-switch\",style:{color:'#bfc9d9',fontWeight:600},children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:\"summarize-all-switch\",checked:summarizeAll,onChange:e=>setSummarizeAll(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"summarize-all-switch\",children:\"Summarize all in current project\"})]})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"saved-select\",value:selectedId,onChange:e=>setSelectedId(e.target.value),className:\"form-select bg-dark text-white\",style:{padding:'10px 18px',borderRadius:8,border:'1.5px solid #4f8cff',fontSize:17,fontWeight:600},disabled:summarizeAll,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u2014 Select a saved text \\u2014\"}),texts.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:`#${t.id} ${t.filename?`(${t.filename})`:''}`},t.id))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label m-0\",style:{color:'#fff',fontWeight:600},children:\"Length\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm btn-outline-light\",style:{borderRadius:8,padding:'2px 8px'},onClick:()=>setShowLengthInfo(v=>!v),children:\"?\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:summaryLength,onChange:e=>setSummaryLength(e.target.value),className:\"form-select bg-dark text-white\",style:{padding:'10px 18px',borderRadius:8,border:'1.5px solid #4f8cff',fontSize:17,fontWeight:600},children:[/*#__PURE__*/_jsx(\"option\",{value:\"short\",children:\"Short\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"long\",children:\"Long\"})]}),showLengthInfo&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#111',border:'1px solid #232323',borderRadius:10,padding:10,marginTop:8,color:'#bfc9d9',fontSize:14,boxShadow:'0 2px 10px rgba(0,0,0,0.3)'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{color:'#fff'},children:\"Short\"}),\": 2-3 sentences or up to 3 bullet points\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{color:'#fff'},children:\"Medium\"}),\": ~4-6 sentences or 3-5 bullet points\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{style:{color:'#fff'},children:\"Long\"}),\": 1-2 paragraphs or 5-8 bullet points\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"Format\"}),/*#__PURE__*/_jsxs(\"select\",{value:summaryFormat,onChange:e=>setSummaryFormat(e.target.value),className:\"form-select bg-dark text-white\",style:{padding:'10px 18px',borderRadius:8,border:'1.5px solid #4f8cff',fontSize:17,fontWeight:600},children:[/*#__PURE__*/_jsx(\"option\",{value:\"bullets\",children:\"Bullets\"}),/*#__PURE__*/_jsx(\"option\",{value:\"plain\",children:\"Plain Text\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"Preview\"}),/*#__PURE__*/_jsx(\"div\",{style:{background:'#191919',padding:16,borderRadius:12,border:'1.5px solid #232323',minHeight:120,color:'#bfc9d9',fontSize:15},children:summarizeAll?/*#__PURE__*/_jsxs(\"span\",{children:[\"All texts in \",projectId?`project ${projectId}`:'the entire database',\" will be summarized.\"]}):selectedText?/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:'pre-wrap',margin:0,color:'#fff'},children:selectedText.text}):/*#__PURE__*/_jsx(\"span\",{children:\"Select a saved text to preview it here.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:'#fff',fontWeight:600},children:\"Optional Instructions\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:instructions,onChange:e=>setInstructions(e.target.value),placeholder:\"Add a short hint (optional)\",className:\"form-control bg-dark text-white\",style:{padding:12,borderRadius:10,border:'1.5px solid #4f8cff',fontSize:16,fontWeight:500}})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading||!summarizeAll&&!selectedId,style:{borderRadius:12,padding:'14px 36px',fontWeight:700,fontSize:18},children:loading?'Summarizing...':summarizeAll?'Summarize All':'Summarize'}),summary&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSavePdf,className:\"btn btn-outline-light ms-2\",style:{borderRadius:12,padding:'14px 24px',fontWeight:700,fontSize:18},children:\"Save as PDF\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#e63946',marginTop:16},children:error}),summary&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:24},children:[/*#__PURE__*/_jsx(\"h4\",{style:{...accentText,fontSize:28,marginBottom:12},children:\"Summary\"}),/*#__PURE__*/_jsx(\"pre\",{style:{background:'#191919',padding:20,borderRadius:12,fontSize:17,color:'#fff',whiteSpace:'pre-wrap',fontWeight:500,margin:0,boxShadow:'0 1px 4px rgba(162,89,255,0.05)'},children:summary})]})]});}export default Summarize;","map":{"version":3,"names":["React","useEffect","useState","useMemo","apiUrl","jsPDF","jsx","_jsx","jsxs","_jsxs","accentGradient","accentText","background","WebkitBackgroundClip","WebkitTextFillColor","fontWeight","Summarize","_ref","projectId","texts","setTexts","loadingTexts","setLoadingTexts","error","setError","selectedId","setSelectedId","summarizeAll","setSummarizeAll","provider","setProvider","ollamaModels","setOllamaModels","ollamaModel","setOllamaModel","ollamaOnlyRunning","setOllamaOnlyRunning","ollamaModelsRefresh","setOllamaModelsRefresh","summary","setSummary","loading","setLoading","summaryLength","setSummaryLength","summaryFormat","setSummaryFormat","instructions","setInstructions","showLengthInfo","setShowLengthInfo","handleSavePdf","doc","unit","format","marginX","marginY","cursorY","setFont","setFontSize","text","meta","filter","Boolean","join","metaLines","splitTextToSize","forEach","line","internal","pageSize","getHeight","addPage","setDrawColor","getWidth","contentLines","filenameBase","save","fetchTexts","url","encodeURIComponent","res","fetch","data","json","err","endpoint","then","models","prev","includes","catch","selectedText","id","Number","find","t","handleSummarize","e","preventDefault","payload","model","undefined","text_id","summarize_all","project_id","summary_length","trim","method","headers","body","JSON","stringify","ok","className","style","width","maxWidth","margin","padding","children","fontSize","marginBottom","onSubmit","htmlFor","color","value","onChange","target","borderRadius","border","disabled","length","map","type","checked","onClick","v","display","marginTop","filename","boxShadow","minHeight","whiteSpace","placeholder"],"sources":["/Users/riccardorubini/Devs/AI-platform/OCR-test/frontend/src/Summarize.js"],"sourcesContent":["import React, { useEffect, useState, useMemo } from 'react';\nimport { apiUrl } from './api';\nimport { jsPDF } from 'jspdf';\n\nconst accentGradient = 'linear-gradient(90deg, #a259ff 0%, #4f8cff 100%)';\nconst accentText = {\n  background: accentGradient,\n  WebkitBackgroundClip: 'text',\n  WebkitTextFillColor: 'transparent',\n  fontWeight: 700,\n};\n\nfunction Summarize({ projectId }) {\n  const [texts, setTexts] = useState([]);\n  const [loadingTexts, setLoadingTexts] = useState(true);\n  const [error, setError] = useState('');\n\n  const [selectedId, setSelectedId] = useState('');\n  const [summarizeAll, setSummarizeAll] = useState(false);\n\n  const [provider, setProvider] = useState('openai');\n  const [ollamaModels, setOllamaModels] = useState([]);\n  const [ollamaModel, setOllamaModel] = useState('llama3');\n  const [ollamaOnlyRunning, setOllamaOnlyRunning] = useState(false);\n  const [ollamaModelsRefresh, setOllamaModelsRefresh] = useState(0);\n\n  const [summary, setSummary] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [summaryLength, setSummaryLength] = useState('medium');\n  const [summaryFormat, setSummaryFormat] = useState('bullets');\n  const [instructions, setInstructions] = useState('');\n  const [showLengthInfo, setShowLengthInfo] = useState(false);\n\n  const handleSavePdf = () => {\n    if (!summary) return;\n    const doc = new jsPDF({ unit: 'pt', format: 'a4' });\n    const marginX = 48;\n    const marginY = 56;\n    let cursorY = marginY;\n\n    doc.setFont('helvetica', 'bold');\n    doc.setFontSize(18);\n    doc.text('Summary', marginX, cursorY);\n    cursorY += 20;\n\n    doc.setFont('helvetica', 'normal');\n    doc.setFontSize(11);\n    const meta = [\n      `Text ID: ${summarizeAll ? 'ALL' : (selectedId || '-')}`,\n      `Provider: ${provider}${provider === 'ollama' ? ` (${ollamaModel})` : ''}`,\n      `Length: ${summaryLength}`,\n      `Format: ${summaryFormat}`,\n      instructions ? `Instructions: ${instructions}` : null,\n      projectId ? `Project: ${projectId}` : 'Project: All',\n    ].filter(Boolean).join('  |  ');\n    const metaLines = doc.splitTextToSize(meta, 540);\n    metaLines.forEach(line => {\n      if (cursorY > doc.internal.pageSize.getHeight() - marginY) {\n        doc.addPage();\n        cursorY = marginY;\n      }\n      doc.text(line, marginX, cursorY);\n      cursorY += 16;\n    });\n\n    cursorY += 8;\n    doc.setDrawColor(200);\n    doc.line(marginX, cursorY, doc.internal.pageSize.getWidth() - marginX, cursorY);\n    cursorY += 18;\n\n    doc.setFont('helvetica', 'normal');\n    doc.setFontSize(12);\n    const contentLines = doc.splitTextToSize(summary, 540);\n    contentLines.forEach(line => {\n      if (cursorY > doc.internal.pageSize.getHeight() - marginY) {\n        doc.addPage();\n        cursorY = marginY;\n      }\n      doc.text(line, marginX, cursorY);\n      cursorY += 16;\n    });\n\n    const filenameBase = summarizeAll ? `summary_all${projectId ? `_project_${projectId}` : ''}` : (selectedId ? `summary_${selectedId}` : 'summary');\n    doc.save(`${filenameBase}.pdf`);\n  };\n\n  useEffect(() => {\n    const fetchTexts = async () => {\n      try {\n        const url = projectId ? `${apiUrl('/texts/')}?project_id=${encodeURIComponent(projectId)}` : apiUrl('/texts/');\n        const res = await fetch(url);\n        const data = await res.json();\n        setTexts(data);\n      } catch (err) {\n        setError('Failed to fetch saved texts');\n      }\n      setLoadingTexts(false);\n    };\n    fetchTexts();\n  }, [projectId]);\n\n  useEffect(() => {\n    if (provider === 'ollama') {\n      const endpoint = ollamaOnlyRunning ? '/ollama/models/running' : '/ollama/models';\n      fetch(apiUrl(endpoint))\n        .then(res => res.json())\n        .then(data => {\n          if (data.models) {\n            setOllamaModels(data.models);\n            setOllamaModel(prev => (data.models.includes(prev) ? prev : (data.models[0] || 'llama3')));\n          } else {\n            setOllamaModels([]);\n          }\n        })\n        .catch(() => setOllamaModels([]));\n    }\n  }, [provider, ollamaOnlyRunning, ollamaModelsRefresh]);\n\n  const selectedText = useMemo(() => {\n    const id = Number(selectedId);\n    return texts.find(t => t.id === id) || null;\n  }, [selectedId, texts]);\n\n  const handleSummarize = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSummary('');\n    setLoading(true);\n\n    if (!summarizeAll && !selectedId) {\n      setError('Please select a saved text to summarize or toggle \"Summarize all\"');\n      setLoading(false);\n      return;\n    }\n\n    const payload = {\n      provider,\n      model: provider === 'ollama' ? ollamaModel : undefined,\n      text_id: summarizeAll ? undefined : Number(selectedId),\n      summarize_all: summarizeAll,\n      project_id: projectId ? Number(projectId) : undefined,\n      summary_length: summaryLength,\n      format: summaryFormat,\n      instructions: instructions.trim() ? instructions.trim() : undefined,\n    };\n\n    try {\n      const res = await fetch(apiUrl('/texts/summarize'), {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setSummary(data.summary);\n      } else {\n        setError(data.error || 'Failed to summarize');\n      }\n    } catch (err) {\n      setError('Network error');\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"main-responsive-box\" style={{ width: '100%', maxWidth: 1100, margin: '0 auto', padding: '0 5vw' }}>\n      <h2 style={{ fontSize: 38, marginBottom: 24, ...accentText }}>Summarize Saved Text</h2>\n\n      <form onSubmit={handleSummarize} className=\"d-flex flex-column gap-3\" style={{ maxWidth: 900, width: '100%' }}>\n        <div className=\"row g-2 align-items-center\">\n          <div className=\"col-12 col-md-6\">\n            <label htmlFor=\"provider-select\" className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>LLM Provider</label>\n            <select\n              id=\"provider-select\"\n              value={provider}\n              onChange={e => setProvider(e.target.value)}\n              className=\"form-select bg-dark text-white\"\n              style={{ padding: '10px 18px', borderRadius: 8, border: '1.5px solid #4f8cff', fontSize: 17, fontWeight: 600 }}\n            >\n              <option value=\"openai\">OpenAI</option>\n              <option value=\"ollama\">Ollama</option>\n            </select>\n          </div>\n          {provider === 'ollama' && (\n            <div className=\"col-12 col-md-6\">\n              <label htmlFor=\"ollama-model-select\" className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>Ollama Model</label>\n              <select\n                id=\"ollama-model-select\"\n                value={ollamaModel}\n                onChange={e => setOllamaModel(e.target.value)}\n                className=\"form-select bg-dark text-white\"\n                style={{ padding: '10px 18px', borderRadius: 8, border: '1.5px solid #4f8cff', fontSize: 17, fontWeight: 600 }}\n                disabled={ollamaModels.length === 0}\n              >\n                {ollamaModels.map(model => (\n                  <option key={model} value={model}>{model}</option>\n                ))}\n              </select>\n              <div className=\"form-check form-switch mt-2\" style={{ color: '#bfc9d9', fontWeight: 600 }}>\n                <input className=\"form-check-input\" type=\"checkbox\" id=\"only-running-switch-sum\" checked={ollamaOnlyRunning} onChange={e => setOllamaOnlyRunning(e.target.checked)} />\n                <label className=\"form-check-label\" htmlFor=\"only-running-switch-sum\">Only running</label>\n              </div>\n              <button type=\"button\" className=\"btn btn-outline-light mt-2\" onClick={() => setOllamaModelsRefresh(v => v + 1)} style={{ borderRadius: 10, padding: '8px 14px' }}>Refresh</button>\n              {ollamaModels.length === 0 && (\n                <span style={{ color: '#bfc9d9', fontSize: 14, display: 'inline-block', marginTop: 8 }}>No models found. Toggle \"Only running\" off, start a model in Ollama, or refresh.</span>\n              )}\n            </div>\n          )}\n        </div>\n\n        <div className=\"row g-2 align-items-start\">\n          <div className=\"col-12 col-md-6\">\n            <div className=\"d-flex align-items-center justify-content-between\">\n              <label htmlFor=\"saved-select\" className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>Saved Text</label>\n              <div className=\"form-check form-switch\" style={{ color: '#bfc9d9', fontWeight: 600 }}>\n                <input className=\"form-check-input\" type=\"checkbox\" id=\"summarize-all-switch\" checked={summarizeAll} onChange={e => setSummarizeAll(e.target.checked)} />\n                <label className=\"form-check-label\" htmlFor=\"summarize-all-switch\">Summarize all in current project</label>\n              </div>\n            </div>\n            <select\n              id=\"saved-select\"\n              value={selectedId}\n              onChange={e => setSelectedId(e.target.value)}\n              className=\"form-select bg-dark text-white\"\n              style={{ padding: '10px 18px', borderRadius: 8, border: '1.5px solid #4f8cff', fontSize: 17, fontWeight: 600 }}\n              disabled={summarizeAll}\n            >\n              <option value=\"\">— Select a saved text —</option>\n              {texts.map(t => (\n                <option key={t.id} value={t.id}>{`#${t.id} ${t.filename ? `(${t.filename})` : ''}`}</option>\n              ))}\n            </select>\n            <div className=\"row g-2 mt-2\">\n              <div className=\"col-6\">\n                <div className=\"d-flex align-items-center justify-content-between\">\n                  <label className=\"form-label m-0\" style={{ color: '#fff', fontWeight: 600 }}>Length</label>\n                  <button type=\"button\" className=\"btn btn-sm btn-outline-light\" style={{ borderRadius: 8, padding: '2px 8px' }} onClick={() => setShowLengthInfo(v => !v)}>?</button>\n                </div>\n                <select\n                  value={summaryLength}\n                  onChange={e => setSummaryLength(e.target.value)}\n                  className=\"form-select bg-dark text-white\"\n                  style={{ padding: '10px 18px', borderRadius: 8, border: '1.5px solid #4f8cff', fontSize: 17, fontWeight: 600 }}\n                >\n                  <option value=\"short\">Short</option>\n                  <option value=\"medium\">Medium</option>\n                  <option value=\"long\">Long</option>\n                </select>\n                {showLengthInfo && (\n                  <div style={{ background: '#111', border: '1px solid #232323', borderRadius: 10, padding: 10, marginTop: 8, color: '#bfc9d9', fontSize: 14, boxShadow: '0 2px 10px rgba(0,0,0,0.3)' }}>\n                    <div><b style={{ color: '#fff' }}>Short</b>: 2-3 sentences or up to 3 bullet points</div>\n                    <div><b style={{ color: '#fff' }}>Medium</b>: ~4-6 sentences or 3-5 bullet points</div>\n                    <div><b style={{ color: '#fff' }}>Long</b>: 1-2 paragraphs or 5-8 bullet points</div>\n                  </div>\n                )}\n              </div>\n              <div className=\"col-6\">\n                <label className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>Format</label>\n                <select\n                  value={summaryFormat}\n                  onChange={e => setSummaryFormat(e.target.value)}\n                  className=\"form-select bg-dark text-white\"\n                  style={{ padding: '10px 18px', borderRadius: 8, border: '1.5px solid #4f8cff', fontSize: 17, fontWeight: 600 }}\n                >\n                  <option value=\"bullets\">Bullets</option>\n                  <option value=\"plain\">Plain Text</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-12 col-md-6\">\n            <label className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>Preview</label>\n            <div style={{ background: '#191919', padding: 16, borderRadius: 12, border: '1.5px solid #232323', minHeight: 120, color: '#bfc9d9', fontSize: 15 }}>\n              {summarizeAll ? (\n                <span>All texts in {projectId ? `project ${projectId}` : 'the entire database'} will be summarized.</span>\n              ) : selectedText ? (\n                <pre style={{ whiteSpace: 'pre-wrap', margin: 0, color: '#fff' }}>{selectedText.text}</pre>\n              ) : (\n                <span>Select a saved text to preview it here.</span>\n              )}\n            </div>\n            <div className=\"mt-3\">\n              <label className=\"form-label\" style={{ color: '#fff', fontWeight: 600 }}>Optional Instructions</label>\n              <input\n                type=\"text\"\n                value={instructions}\n                onChange={e => setInstructions(e.target.value)}\n                placeholder=\"Add a short hint (optional)\"\n                className=\"form-control bg-dark text-white\"\n                style={{ padding: 12, borderRadius: 10, border: '1.5px solid #4f8cff', fontSize: 16, fontWeight: 500 }}\n              />\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <button type=\"submit\" className=\"btn btn-primary\" disabled={loading || (!summarizeAll && !selectedId)} style={{ borderRadius: 12, padding: '14px 36px', fontWeight: 700, fontSize: 18 }}>\n            {loading ? 'Summarizing...' : (summarizeAll ? 'Summarize All' : 'Summarize')}\n          </button>\n          {summary && (\n            <button type=\"button\" onClick={handleSavePdf} className=\"btn btn-outline-light ms-2\" style={{ borderRadius: 12, padding: '14px 24px', fontWeight: 700, fontSize: 18 }}>\n              Save as PDF\n            </button>\n          )}\n        </div>\n      </form>\n\n      {error && <div style={{ color: '#e63946', marginTop: 16 }}>{error}</div>}\n      {summary && (\n        <div style={{ marginTop: 24 }}>\n          <h4 style={{ ...accentText, fontSize: 28, marginBottom: 12 }}>Summary</h4>\n          <pre style={{ background: '#191919', padding: 20, borderRadius: 12, fontSize: 17, color: '#fff', whiteSpace: 'pre-wrap', fontWeight: 500, margin: 0, boxShadow: '0 1px 4px rgba(162,89,255,0.05)' }}>{summary}</pre>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Summarize; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}